---
layout: post
title: Websphere Commerce build with Git
date: 2018-12-11 21:16:05.000000000 -05:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- Websphere Commerce
tags: []
meta:
  _edit_last: '1'
  _thumbnail_id: '373'
  _wp_page_template: default
  _adinserter_block_exceptions: ''
  post_grid_post_settings: a:10:{s:9:"post_skin";s:4:"flat";s:19:"custom_thumb_source";s:92:"https://abyte.stream/wp-content/plugins/post-grid/assets/frontend/css/images/placeholder.png";s:17:"font_awesome_icon";s:0:"";s:23:"font_awesome_icon_color";s:7:"#737272";s:22:"font_awesome_icon_size";s:4:"50px";s:17:"custom_youtube_id";s:0:"";s:15:"custom_vimeo_id";s:0:"";s:21:"custom_dailymotion_id";s:0:"";s:14:"custom_mp3_url";s:0:"";s:20:"custom_soundcloud_id";s:0:"";}
  _the_champ_meta: a:5:{s:7:"sharing";i:0;s:16:"vertical_sharing";i:0;s:7:"counter";i:0;s:16:"vertical_counter";i:0;s:11:"fb_comments";i:0;}
  _yoast_wpseo_content_score: '60'
  _yoast_wpseo_primary_category: '3'
  ampforwp_custom_content_editor: ''
  ampforwp_custom_content_editor_checkbox: ''
  ampforwp-amp-on-off: default
author:
  login: sanjaypatel2525
  email: sanjaypatel2525@gmail.com
  display_name: sanjaypatel2525
  first_name: ''
  last_name: ''
---
<p>Websphere Commerce (WCS) is e-Commerce software platform. It supports multiple business models to support a wide range of customer requirements.</p>
<p>WCS did not have Git support till version 8.  It has introduced Git support from version 9 onwards. Git is a free open source distributed source control management software.</p>
<p>This blog we are going to discuss Git configuration with WCS build.</p>
<h3>Prerequisite:</h3>
<p>- Git needs to be installed on the build system</p>
<ol>
<li>
<h3>Copy the template file from wcbd template to wcbd  folder and update the names as given below.</h3>
<h3><img class="alignnone size-full wp-image-370 " src="{{ site.baseurl }}/assets/img_5c1021100f5c3.png" alt="" /></h3>
<p>- extract-git.private.properties<br />
- extract-git.properties<br />
- extract-git.xml</li>
<li>
<h3>Configure build.property to pick new extract-git.xml</h3>
<p>extract.ant.file=${basedir}/extract-git.xml</li>
<li>
<h3>Configure git URL and default branch or tag name in extract-git.properties.</h3>
<pre class="EnlighterJSRAW" data-enlighter-language="null">#-------------------------------------------------------------------------------
# git.url
#
# The git url variable. On Windows, use the escaped backslash (\) as the path
# separator if repository is local.
#-------------------------------------------------------------------------------
git.url=yourgitip:yourgit:port/yourprojectname.git

#-------------------------------------------------------------------------------
# git.branchOrTag
#
# The branch or tag of the package/module to check out.
#-------------------------------------------------------------------------------
git.branchOrTag=development</pre>
</li>
<li>
<h3> Configure git username and password in extract-git.private.properties</h3>
<p>git.password=&lt;someusername&gt;<br />
git.username=&lt;somepassword&gt;</li>
<li>
<h3>Update the extract-git.xml with below ant code.</h3>
<pre class="EnlighterJSRAW" data-enlighter-language="null">&lt;project name="extract-git" default="all"&gt;

  &lt;available property="found.${ant.project.name}.properties"
             file="${basedir}/${ant.project.name}.properties"
             type="file" /&gt;
  &lt;fail message="${basedir}/${ant.project.name}.properties does not exist."
        unless="found.${ant.project.name}.properties" /&gt;
  &lt;property file="${basedir}/${ant.project.name}.properties" /&gt;

  &lt;encodeProperties file="${ant.project.name}.private.properties" /&gt;
  &lt;decodeLoadProperties file="${ant.project.name}.private.properties" /&gt;

  &lt;!--
   Runs the source extraction process.
  --&gt;
  &lt;target name="all"&gt;
    &lt;condition property="branchOrTag" value="${build.branchOrTag}" else="${git.branchOrTag}"&gt;
        &lt;isset property="build.branchOrTag"/&gt;
    &lt;/condition&gt;
    &lt;if&gt;
      &lt;istrue value="${extract.update.mode}" /&gt;
      &lt;then&gt;
        &lt;if&gt;
          &lt;available file="${module.dir}" type="dir" /&gt;
          &lt;then&gt;
            &lt;echo message = "GIT Command: git pull --tags" /&gt;
            &lt;exec executable = "git" dir = "${module.dir}" failonerror="true"&gt;
              &lt;arg value = "pull" /&gt;
              &lt;arg value = "--tags" /&gt;
            &lt;/exec&gt;
            &lt;echo message = "GIT Command: git reset --hard origin/${branchOrTag}" /&gt;
            &lt;exec executable = "git" dir = "${module.dir}" failonerror="true"&gt;
              &lt;arg value = "reset" /&gt;
              &lt;arg value = "--hard" /&gt;
              &lt;arg value = "origin/${branchOrTag}" /&gt;
            &lt;/exec&gt;
          &lt;/then&gt;
          &lt;else&gt;
            &lt;echo message = "GIT Command: git clone -b ${branchOrTag} http://${git.username}:${git.password}@${git.url}" /&gt;
            &lt;exec executable = "git" dir = "${source.dir}" failonerror="true"&gt;
              &lt;arg value = "clone" /&gt;
              &lt;arg value = "-b" /&gt;
              &lt;arg value = "${branchOrTag}" /&gt;
              &lt;arg value = "http://${git.username}:${git.password}@${git.url}" /&gt;
            &lt;/exec&gt;
          &lt;/else&gt;
        &lt;/if&gt;
      &lt;/then&gt;
      &lt;else&gt;
        &lt;echo message = "GIT Command: git clone -b ${branchOrTag} http://${git.username}:${git.password}@${git.url}" /&gt;
        &lt;exec executable = "git" dir = "${source.dir}" failonerror="true"&gt;
          &lt;arg value = "clone" /&gt;
          &lt;arg value = "-b" /&gt;
          &lt;arg value = "${branchOrTag}" /&gt;
          &lt;arg value = "http://${git.username}:${git.password}@${git.url}" /&gt;
        &lt;/exec&gt;
      &lt;/else&gt;
    &lt;/if&gt;
    &lt;defaultexcludes add="CVSROOT/**" /&gt;
  &lt;/target&gt;

&lt;/project&gt;</pre>
</li>
<li>
<h3>Run the build and test it using the following command.</h3>
<p>./wcbd-ant -buildfile wcbd-build.xml</li>
</ol>
<p>This is all about configuring Git with WCBD ant script. This script covers build in both the modes full and update. Also, this build supports code checkout form tag and branch both.</p>
<p>&nbsp;</p>
