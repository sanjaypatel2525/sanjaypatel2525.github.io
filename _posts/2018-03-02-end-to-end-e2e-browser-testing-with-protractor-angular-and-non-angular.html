---
layout: post
title: E2E Browser Testing with Protractor
date: 2018-03-02 03:36:41.000000000 -05:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories: []
tags: []
meta:
  _edit_last: '1'
  _thumbnail_id: '253'
  _wp_page_template: default
  post_grid_post_settings: a:10:{s:9:"post_skin";s:4:"flat";s:19:"custom_thumb_source";s:91:"http://abyte.stream/wp-content/plugins/post-grid/assets/frontend/css/images/placeholder.png";s:17:"font_awesome_icon";s:0:"";s:23:"font_awesome_icon_color";s:7:"#737272";s:22:"font_awesome_icon_size";s:4:"50px";s:17:"custom_youtube_id";s:0:"";s:15:"custom_vimeo_id";s:0:"";s:21:"custom_dailymotion_id";s:0:"";s:14:"custom_mp3_url";s:0:"";s:20:"custom_soundcloud_id";s:0:"";}
  _the_champ_meta: a:5:{s:7:"sharing";i:0;s:16:"vertical_sharing";i:0;s:7:"counter";i:0;s:16:"vertical_counter";i:0;s:11:"fb_comments";i:0;}
  _yoast_wpseo_content_score: '90'
  _yoast_wpseo_primary_category: ''
  ampforwp_custom_content_editor: ''
  ampforwp_custom_content_editor_checkbox: ''
  ampforwp-amp-on-off: default
  _yoast_wpseo_focuskw_text_input: End to End (E2E) Browser Testing with Protractor
    - Angular and Non Angular
  _yoast_wpseo_focuskw: End to End (E2E) Browser Testing with Protractor - Angular
    and Non Angular
  _yoast_wpseo_metadesc: There are many ways to test our application but having a
    testing with end user feel is the always the important one. The protractor is
    JS framework built up Selenium JS web driver. It provides ease of End to End (E2E)
    browser testing with protractor It provides a JS wrapper around Selenium commands.
    The framework..
  _yoast_wpseo_linkdex: '56'
  _yoast_wpseo_metakeywords: browser, testing, protractor, headless, angular, non,
    driver
author:
  login: sanjaypatel2525
  email: sanjaypatel2525@gmail.com
  display_name: sanjaypatel2525
  first_name: ''
  last_name: ''
---
<p>There are many ways to test our application but having a testing with end user feel is the always the important one. The protractor is JS framework built up Selenium JS web driver.  It provides ease of End to End (E2E) browser testing with protractor angular and non angular applications. It provides a JS wrapper around Selenium commands. The framework contains many intuitive functions which really speed up writing test cases.</p>
<p>** Protractor doesn't require your site to be on the Angular framework, You can use it all kind of sites.</p>
<h2>In this blog, we are going to cover following points.</h2>
<ol>
<li>What is Protractor and why you need it?</li>
<li>Setting up and running Protractor project.</li>
<li>Running protractor headless in non-UI Linux kind of environment.</li>
<li>Perks- Taking the screenshot.</li>
</ol>
<p id="oKyciKV"><img class="alignnone size-full wp-image-252" src="{{ site.baseurl }}/assets/img_5a9774aa865b3.png" alt="" /></p>
<h2>What is Protractor and why you need it?</h2>
<p>The protractor is an end to end browser test automation tool.  It emulates user like actions on browsers and is supported by many browsers (chrome, IE, firefox etc). It is a wrapper around selenium web driver commands and much more. Provides automatic wait capabilities for the resource to load and render. Here some points which make Protractor a great framework.</p>
<ol>
<li>It is an open source project and has big community support.</li>
<li>It is well documented.</li>
<li>Easy to setup and configure.</li>
<li>Work with almost all the browser.</li>
<li>Anytime you can take screenshots of the browser.</li>
</ol>
<h2>Setting up and running Protractor project.</h2>
<p>Let's jump into technicals. We are going to install and run one sample Protractor test case.</p>
<ol>
<li style="list-style-type: none;">
<ol>
<li>
<h3>Download and install Node JS and npm from the following URL.</h3>
<p><a href="https://nodejs.org/en/download/" rel="nofollow">https://nodejs.org/en/download/</a></li>
<li>
<h3>Install Protractor using npm, Open shall/command prompt.</h3>
<p><code>npm install -g protractor</code></li>
<li>
<h3>With above command, you must have web driver-manger command available to your console, Update web driver-manager<code>webdriver-manager update</code></h3>
</li>
<li>
<h3>Start web driver-manager in the separate console.</h3>
<p><code>webdriver-manager start</code><br />
This required when you run you test case.</li>
<li>Create a file conf.js for Protractor configurations.
<pre>exports.config = {
	seleniumAddress: 'http://localhost:4444/wd/hub',
	specs: ['First-test.js'],
	allScriptsTimeout: 30000,

	// Options to be passed to Jasmine-node.
	jasmineNodeOpts: {
		showColors: true,
		defaultTimeoutInterval: 100000,
		isVerbose: true
	},
	capabilities: {
		'browserName': 'chrome',
		'chromeOptions': {
			args: [ "--headless", "--disable-gpu", "--window-size=1920x1080" ] 
		}
	}// remove headless if you want to see the action
};
</pre>
</li>
<li>
<h3>Create First-test.js in the same location.</h3>
<p>This is your actual test steps. For now, you can copy paste below code. This script will open google.com and search for 'abyte.stream'</p>
<pre>describe('First automated tests', function() {

  beforeEach(function() {
      return browser.ignoreSynchronization = true; // Important for non angular applications
    });

  it('First test', function() {
	//debugger;	 enable if you want to debug the code in chrome
	browser.driver.get('https://www.google.com');
	browser.driver.manage().window().maximize();
	browser.driver.findElement(by.id('lst-ib')).sendKeys('abyte.stream');
	browser.driver.findElement(by.name('btnK')).click();
        //expect(completedAmount.count()).toEqual(2);*/ Test any condition here which expect in the output.
  });
});</pre>
</li>
<li>
<h3>Run the protractor using the following command and see the protractor driving browser magic.<br />
<code>protractor conf.js</code></h3>
</li>
</ol>
</li>
</ol>
<h2>Running protractor headless in non UI Linux kind of environment.</h2>
<p id="dDDGQRj"><img class="alignnone size-full wp-image-260" src="{{ site.baseurl }}/assets/img_5a98c56230888.png" alt="" /></p>
<p>Till this point, we have successfully achieved running test on the real browser. There are places when we do not have GUI, we just have a black screen server, In this situation, we need to go headless.</p>
<p>Headless browser doesn't require a graphics driver at all, They just get commands and execute them directly in memory. To achieve this you need to specify headless in cong.js under capabilities.</p>
<pre> capabilities: { 'browserName': 'chrome', 'chromeOptions': { args: [ "--headless", "--disable-gpu", "--window-size=1920x1080" ] } }</pre>
<h2>Taking screenshot</h2>
<pre class="ng-scope"><code class="lang-javascript"><span class="pln">browser</span><span class="pun">.</span><span class="pln">takeScreenshot</span><span class="pun">().</span><span class="kwd">then</span><span class="pun">(</span><span class="kwd">function</span><span class="pun">(</span><span class="pln">png</span><span class="pun">)</span> <span class="pun">{</span>
  <span class="kwd">var</span><span class="pln"> stream </span><span class="pun">=</span><span class="pln"> fs</span><span class="pun">.</span><span class="pln">createWriteStream</span><span class="pun">(</span><span class="str">"/tmp/screenshot.png"</span><span class="pun">);</span><span class="pln">
  stream</span><span class="pun">.</span><span class="pln">write</span><span class="pun">(</span><span class="kwd">new</span> <span class="typ">Buffer</span><span class="pun">(</span><span class="pln">png</span><span class="pun">,</span> <span class="str">'base64'</span><span class="pun">));</span><span class="pln">
  stream</span><span class="pun">.</span><span class="kwd">end</span><span class="pun">();</span>
<span class="pun">});</span></code></pre>
