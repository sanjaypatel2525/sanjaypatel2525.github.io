---
layout: post
title: Code Quality analysis with Sonar
date: 2018-02-22 19:16:58.000000000 -05:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories: []
tags: []
meta:
  _edit_last: '1'
  _thumbnail_id: '179'
  _wp_page_template: default
  post_grid_post_settings: a:10:{s:9:"post_skin";s:4:"flat";s:19:"custom_thumb_source";s:92:"https://abyte.stream/wp-content/plugins/post-grid/assets/frontend/css/images/placeholder.png";s:17:"font_awesome_icon";s:0:"";s:23:"font_awesome_icon_color";s:7:"#737272";s:22:"font_awesome_icon_size";s:4:"50px";s:17:"custom_youtube_id";s:0:"";s:15:"custom_vimeo_id";s:0:"";s:21:"custom_dailymotion_id";s:0:"";s:14:"custom_mp3_url";s:0:"";s:20:"custom_soundcloud_id";s:0:"";}
  _the_champ_meta: a:5:{s:7:"sharing";i:0;s:16:"vertical_sharing";i:0;s:7:"counter";i:0;s:16:"vertical_counter";i:0;s:11:"fb_comments";i:0;}
  _yoast_wpseo_content_score: '60'
  _yoast_wpseo_primary_category: ''
  ampforwp_custom_content_editor: ''
  ampforwp_custom_content_editor_checkbox: ''
  ampforwp-amp-on-off: default
  _yoast_wpseo_focuskw_text_input: Code Quality analysis with Sonar - Sanjay Patel
    blogs
  _yoast_wpseo_focuskw: Code Quality analysis with Sonar - Sanjay Patel blogs
  _yoast_wpseo_linkdex: '62'
  _yoast_wpseo_metakeywords: sonar, Code quality, code,, quality, sonar scanner, sonar-scanner,
    sonar qube, sonarqube
  _yoast_wpseo_metadesc: This article describes step by step to setup sonarqube in
    your local environment and run the reports. Project with or without maven/gradle
    can be configure for code quality analysis with sonarqube and sonar scanner.
author:
  login: sanjaypatel2525
  email: sanjaypatel2525@gmail.com
  display_name: sanjaypatel2525
  first_name: ''
  last_name: ''
---
<p>Every software starts with a good documentation and good code. Whenever a team starts a project are there different minds working on the same thing and sometimes this leads to differences in coding standards. To overcome this problem there are many standalone tools, which can go through your code and depending on configured rules in that tool. It gives lines of code which under coding rules violation.</p>
<p>There are many code quality tools in java such as,</p>
<ul style="padding-left: 30px;">
<li>CheckStyle</li>
<li>Firebugs</li>
<li>PMD</li>
</ul>
<p>Actually, sonar is the combination of all these, That's the reason I prefer Sonar over the individual tool. Moreover, it has code coverage plugin as well Cobertura which is quite decent.</p>
<h1>Steps to install Sonar and Sonar-Scanner.</h1>
<ol style="padding-left: 30px;">
<li>
<h3>Install required version of JRE.</h3>
<p>https://docs.sonarqube.org/display/SONAR/Requirements</li>
<li>
<h3>Download latest Sonar form following link.</h3>
<p>https://www.sonarqube.org/downloads/</li>
<li>
<h3>Read licensing and stuff (Completely optional, The current version is licensed under LGPL v3 )</h3>
<p>https://softwareengineering.stackexchange.com/questions/47323/can-i-use-an-lgpl-licenced-library-in-my-commercial-app</li>
<li>
<h3>Install Sonar Scanner (It's a replacement for Sonar runner). If you are using maven and  gradle then it's not required.</h3>
<p>https://docs.sonarqube.org/display/SCAN/Analyzing+with+SonarQube+Scanner</li>
<li>
<h3>Extract both the zips on one location as shown below.</h3>
<p id="AkTPwUR"><img class="alignnone size-full wp-image-176" src="{{ site.baseurl }}/assets/img_5a8efabed2852.png" alt="" /></p>
</li>
<li>
<h3>Let Sonar-scanner know  Sonarqube URL (Optional, If you haven't updated the port or URL).</h3>
<p>sonar-scanner\conf\sonar-scanner.properties --&gt; Update the sonar.host.url</li>
<li>Add Sonar-scanner\bin path to your system and verify by running <code>sonar-scanner.bat -h</code> in the console.</li>
<li>
<h3>Spin up the Sonarqube server by running StartSonar.bat from Sonarqube bin directory and verify if it has come properly or not by going to the browser.</h3>
<p>localhost:9000<br />
click tutorial and make a note of the generated key.</li>
<li>
<h3>Create sonar-project.properties in the root of the project which you want to scan.</h3>
<div class="codeHeader panelHeader pdl"><b>sonar-project.properties</b></div>
<div class="codeContent panelContent pdl">
<div>
<div id="highlighter_656388" class="syntaxhighlighter sh-confluence nogutter bash">
<table style="height: 377px;" border="0" width="731" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td class="code">
<div class="container" title="Hint: double-click to select code">
<div class="line number1 index0 alt2"><code class="bash comments"># must be unique in a given SonarQube instance</code></div>
<div class="line number2 index1 alt1"><code class="bash plain">sonar.projectKey=my:project</code></div>
<div class="line number3 index2 alt2"><code class="bash comments"># this is the name and version displayed in the SonarQube UI. Was mandatory prior to SonarQube 6.1.</code></div>
<div class="line number4 index3 alt1"><code class="bash plain">sonar.projectName=My project</code></div>
<div class="line number5 index4 alt2"><code class="bash plain">sonar.projectVersion=1.0</code></div>
<div class="line number6 index5 alt1"></div>
<div class="line number7 index6 alt2"><code class="bash comments"># Path is relative to the sonar-project.properties file. Replace "\" by "/" on Windows.</code></div>
<div class="line number8 index7 alt1"><code class="bash comments"># This property is optional if sonar.modules is set. </code></div>
<div class="line number9 index8 alt2"><code class="bash plain">sonar.sources=.</code></div>
<div class="line number10 index9 alt1"></div>
<div class="line number11 index10 alt2"><code class="bash comments"># Encoding of the source code. Default is default system encoding</code></div>
<div class="line number12 index11 alt1"><code class="bash comments">#sonar.sourceEncoding=UTF-8</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</li>
<li>
<h3>Run solar-scanner command from the root of your project.</h3>
</li>
<li>
<h3>In case you are not using maven or gradle you might face the following issue.</h3>
<p id="cXqGbsX"><img class="alignnone size-full wp-image-177" src="{{ site.baseurl }}/assets/img_5a8f039d217de.png" alt="" /></p>
<p>Just add a follwoing line in sonar-project.properties.<br />
sonar.java.binaries=&lt;replace with your binaries path. bin\**\*.class&gt; #path of your class files.</li>
<li>
<h3>Once you get 'Execution Success'. Revisit your localhost:9000.</h3>
<p id="oDkJVHB"><img class="alignnone size-full wp-image-181 " src="{{ site.baseurl }}/assets/img_5a8f182662166.png" alt="" /></p>
</li>
</ol>
<p>That's setup is complete, You can browse through the site and find out the easy.</p>
