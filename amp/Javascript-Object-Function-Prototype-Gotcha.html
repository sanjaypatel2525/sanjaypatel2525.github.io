<!doctype html>
<html amp lang="en">
  <head>
    <meta charset="utf-8">
    <title>Javascript Object Oriented Function Prototype  Gotcha</title>
    <link rel="canonical" href="https://abyte.streamhttps://abyte.stream/Javascript-Object-Function-Prototype-Gotcha/" />
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    <style amp-custom>
        .header-post {
        background-color: rgb(0, 95, 151);
        min-height: 23.25rem;
        width: 100%;
        }
        .header-post .content {
        width: 95%;
        text-align: center;
        padding-top: 8.75rem;
        padding-right: 0px;
        padding-bottom: 4.125rem;
        padding-left: 0px;
        margin-top: auto;
        margin-right: auto;
        margin-bottom: auto;
        margin-left: auto;
        max-width: 50rem;
        }
        .header-post .date {
        font-family: "Open Sans", sans-serif;
        font-weight: 300;
        font-style: normal;
        font-size: 1rem;
        }
        .header-post h1, .header-post .subtitle, .header-post .date {
        color: rgb(255, 255, 255);
        text-align: center;
        }
        h1 {
        font-size: 2em;
        margin-top: 0.67em;
        margin-right: 0px;
        margin-bottom: 0.67em;
        margin-left: 0px;
        }
        h1, h2, h3, h4 {
        font-family: "Open Sans", sans-serif;
        font-weight: 800;
        font-style: normal;
        }
        .header-post h1 {
        font-size: 1.875rem;
        margin-top: 0px;
        margin-right: 0px;
        margin-bottom: 30px;
        margin-left: 0px;
        text-shadow: rgb(0, 76, 121) 3px 3px;
        }
        .header-post .subtitle {
        font-family: "Open Sans", sans-serif;
        font-weight: 300;
        font-style: normal;
        font-size: 1.25rem;
        }
        .header-post a, .header-post p {
        color: rgb(255, 255, 255);
        text-decoration-line: none;
        text-decoration-style: initial;
        text-decoration-color: initial;
        font-family: "Open Sans", sans-serif;
        font-weight: 300;
        font-style: normal;
        font-size: 1.125rem;
        }

        article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary {
        display: block;
        }
        figure {
        margin-top: 1em;
        margin-right: 40px;
        margin-bottom: 1em;
        margin-left: 40px;
        }
        .highlight {
        margin-top: 1.25rem;
        margin-right: 0px;
        margin-bottom: 1.25rem;
        margin-left: 0px;
        }
        pre {
        overflow-x: auto;
        overflow-y: auto;
        background-image: initial;
        background-position-x: initial;
        background-position-y: initial;
        background-size: initial;
        background-repeat-x: initial;
        background-repeat-y: initial;
        background-attachment: initial;
        background-origin: initial;
        background-clip: initial;
        background-color: rgb(34, 34, 34);
        width: 100%;
        padding-top: 1.25rem;
        padding-right: 0px;
        padding-bottom: 1.25rem;
        padding-left: 0px;
        color: rgb(255, 255, 255);
        margin-top: 1.875rem;
        margin-right: 0px;
        margin-bottom: 1.875rem;
        margin-left: 0px;
        font-size: 0.875rem;
        }
        code, kbd, pre, samp {
        font-family: monospace, monospace;
        font-size: 1em;
        }
        pre code {
        width: auto;
        max-width: 50rem;
        float: none;
        display: block;
        margin-right: auto;
        margin-left: auto;
        padding-top: 0px;
        padding-right: 1.25rem;
        padding-bottom: 0px;
        padding-left: 1.25rem;
        }
        pre code::after {
        clear: both;
        }
        pre span {
        line-height: 1.5rem;
        font-family: Monaco, Consolas, Menlo, monospace;
        }
        .highlight .c, .highlight .cm, .highlight .cp, .highlight .c1, .highlight .cs {
        color: rgb(117, 113, 94);
        }
        .highlight .m, .highlight .n, .highlight .nb, .highlight .ni, .highlight .nl, .highlight .nn, .highlight .py, .highlight .nv, .highlight .w, .highlight .bp, .highlight .vc, .highlight .vg, .highlight .vi {
        color: rgb(164, 208, 67);
        }
        .highlight .o, .highlight .p {
        color: rgb(247, 247, 242);
        }
        .highlight .ld, .highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .si, .highlight .sx, .highlight .sr, .highlight .s1, .highlight .ss {
        color: rgb(230, 219, 116);
        }
    </style>
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <script async src="https://cdn.ampproject.org/v0.js"></script>
  </head>
  <body>
<header class="header-post" role="banner">
        <div class="content" style="transform: translateY(0px); opacity: 1;">
            
                <time itemprop="datePublished" datetime="2018-12-11T18:57:06-05:00" class="date">11 Dec 2018 - sanjaypatel2525</time>
            
            <h1 class="post-title" itemprop="name">Javascript Object Oriented Function Prototype  Gotcha</h1>
            <p itemprop="description" class="subtitle"></p>
        </div>
</header>
<p>Ok, when you come from a Object Oriented based background you will always have curiosity about Javascript. Here are few points which I want to lay down before we see some code.</p>
<ul>
  <li>Javascript has two main concepts function and object which are derived directly from Function and Object prototype.</li>
  <li>‘Function’ and ‘Object’ are prototype defined in Javascript same as above.</li>
  <li>The objects are first class citizen in Javascript, there are no classes.</li>
  <li>The functions themselves are objects but they are callable, they are made from ‘Function’ Prototype.</li>
  <li>The function will have both the properties <strong>proto</strong> and Prototype, while object will have only <strong>proto</strong>. Think as <strong>proto</strong> on any object gives the blueprint of function/prototype it is created from. While prototype is property of function itself and is blueprint of the same.</li>
</ul>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">Cat</span>  <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">){</span>
    <span class="c1">//public variable</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>

    <span class="c1">//private variable or closure</span>
    <span class="kd">var</span> <span class="nx">fullname</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> W</span><span class="dl">'</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">c1</span> <span class="o">=</span> <span class="nx">Cat</span><span class="p">(</span><span class="dl">"</span><span class="s2">Carol</span><span class="dl">"</span><span class="p">);</span>  <span class="c1">//probably wrong way to call but still works and 'this' is passed as window. </span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>  <span class="c1">// print carol</span>

<span class="kd">var</span> <span class="nx">c2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Cat</span><span class="p">(</span><span class="dl">"</span><span class="s2">Karen</span><span class="dl">"</span><span class="p">);</span> <span class="c1">// Here new object is created with Cat prototype. So a new 'this' is passed and set the values and assigns back to c2.</span>

<span class="nx">Cat</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">===</span> <span class="nx">c1</span><span class="p">.</span><span class="nx">__proto__</span><span class="p">;</span> <span class="c1">// prints true, they are same thing</span>
<span class="k">typeof</span> <span class="nx">Cat</span><span class="p">;</span> <span class="c1">//give "function", We created Cat as a function</span>
<span class="k">typeof</span> <span class="nx">c1</span><span class="p">;</span> <span class="c1">// gives "object", we create c1 as a object out of prototype(function) Cat.</span>
<span class="k">typeof</span> <span class="nx">c1</span><span class="p">.</span><span class="nx">__proto__</span><span class="p">;</span> <span class="c1">//gives "object"</span>
<span class="k">typeof</span> <span class="nx">Cat</span><span class="p">.</span><span class="nx">prototype</span><span class="p">;</span> <span class="c1">//gives "object"</span>
<span class="nx">typef</span> <span class="nx">Cat</span><span class="p">.</span><span class="nx">__proto__</span><span class="p">;</span> <span class="c1">//gives "function, inherits from 'Function'</span>
<span class="nx">Cat</span><span class="p">.</span><span class="nx">__proto__</span> <span class="o">===</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">;</span> <span class="c1">//return true;</span></code></pre></figure>

<h3 id="method-creation-via-constructor-vs-prototype">Method creation via constructor vs prototype</h3>
<ul>
  <li>You can create method using prototype of using constructor approach. //Refer the example - 5</li>
  <li>Prototype way of adding properties/method is faster compared to construcor approach while constructor approach has access to private variable which prototype way does not.</li>
</ul>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// example - 5</span>
<span class="kd">function</span> <span class="nx">Class</span> <span class="p">()</span> <span class="p">{}</span>
<span class="nx">Class</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">calc</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">c</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">c</span> <span class="o">+</span> <span class="nx">d</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">c1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Class</span><span class="p">();</span>
<span class="nx">c1</span><span class="p">.</span><span class="nx">calc</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span> <span class="c1">// prints 3</span>

<span class="c1">// Using constructor approach</span>
<span class="kd">function</span> <span class="nx">Class</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">calc</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">c</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">c</span> <span class="o">+</span> <span class="nx">d</span><span class="p">;</span>
<span class="p">}</span> 
<span class="kd">var</span> <span class="nx">c1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Class</span><span class="p">();</span>
<span class="nx">c1</span><span class="p">.</span><span class="nx">calc</span><span class="p">();</span> <span class="c1">// prints 3, no changes at all but internally constructor approach consumes more compute, while prototype changes all places at once. Constructor use this variable which gets execute for all the instances of Class but prototype updates the blueprint itself and it is shared by all.</span></code></pre></figure>

<h3 id="null-and-undefined---dont-remember-no-issue">Null and Undefined - Don’t remember no issue.</h3>
<ul>
  <li>Everything is object in Javascript except primitive type string, number, bigint, boolean, null, undefined, symbol.</li>
  <li>string, number, bigInt, boolean, symbol have equivalent wrapper String, Number, BigInt, Boolean, Symbol.</li>
  <li>Primitive type are immutable. A new memory gets allocated when there is a change in value.</li>
  <li>null and undefined are only one which do not have object wrap.</li>
  <li>null is an object and is global. It points to a location.</li>
  <li>undefined is whenever a variable is not defined.</li>
</ul>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">typeof</span> <span class="kc">null</span><span class="p">;</span> <span class="c1">//gives "object"</span>
<span class="k">typeof</span> <span class="kc">undefined</span><span class="p">;</span> <span class="c1">//gives "undefined"</span>
<span class="kc">null</span><span class="o">+</span><span class="mi">5</span><span class="p">;</span> <span class="c1">//give 5, Javascript treats null as 0 for mathematical operation.</span>
<span class="o">!</span><span class="kc">null</span> <span class="c1">// gives true</span>
<span class="kc">null</span> <span class="o">==</span> <span class="kc">null</span> <span class="c1">// true</span>
<span class="kc">undefined</span> <span class="o">===</span> <span class="kc">false</span> <span class="c1">// gives false, undefined is not comparable to boolean values</span>
<span class="o">!</span><span class="kc">undefined</span> <span class="c1">// gives true</span>
<span class="kc">undefined</span> <span class="o">==</span> <span class="kc">false</span> <span class="c1">// gives false, undefined is not comparable to boolean values</span>
<span class="kc">undefined</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="c1">// true</span></code></pre></figure>

<h3 id="nan---dont-remember-no-issue">Nan - Don’t remember no issue.</h3>
<p>Special Type of Number which comes when compiler doesn’t like numeric operation or you can say kind of exception.</p>
<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kc">undefined</span><span class="o">+</span><span class="mi">12</span> <span class="p">;</span> <span class="c1">// gives NaN</span>
<span class="nx">typeOf</span> <span class="kc">NaN</span><span class="p">;</span> <span class="c1">// Number</span>
<span class="kc">NaN</span> <span class="o">===</span> <span class="kc">NaN</span> <span class="c1">// false.  </span></code></pre></figure>

<h2 id="object-oriented-concepts">Object Oriented Concepts</h2>
<h2 id="making-thing-private">Making thing private.</h2>
<p>Use closure to make thing private, they will not be visible to outside world and accessed normally using public method. Closure extends the scrope of object/variables even thought there parent reference no more exists. Here, The RetainExample call was over at the line 6, ‘a’ might have created and destroyed, not true since a function returned from outer function, the inner function lives forever with outer functions inner soul(variable/object - lexical scope).</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">RetainExample</span><span class="p">(){</span>
  <span class="nx">a</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nx">getA</span><span class="p">(){</span> <span class="k">return</span> <span class="nx">a</span><span class="p">;}</span>
  <span class="k">return</span> <span class="nx">getA</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">retainedValue</span> <span class="o">=</span> <span class="nx">RetainExample</span><span class="p">();</span> <span class="c1">// line - 6</span>
<span class="nx">retainedValue</span><span class="p">();</span> <span class="c1">// print 10.  </span>

<span class="c1">// Closure in action for making variable private.</span>
<span class="kd">var</span> <span class="nx">Class</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">10</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">printA</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">c1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Class</span><span class="p">();</span>
<span class="nx">c1</span><span class="p">.</span><span class="nx">printA</span><span class="p">();</span> <span class="c1">// prints 10;</span>
<span class="nx">c1</span><span class="p">.</span><span class="nx">a</span> <span class="p">;</span> <span class="c1">//errors out with variable not defined.</span></code></pre></figure>

<h3 id="inheritance">Inheritance</h3>
<p>There are mainly two ways you can inherit property of other function.<br>
<strong>Using Constructor Call.</strong></p>
<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">A</span><span class="p">(</span><span class="nx">x</span><span class="p">){</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
<span class="p">};</span>

<span class="kd">function</span> <span class="nx">B</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">){</span>
  <span class="nx">A</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">x</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">B</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span>
<span class="nx">b</span><span class="p">.</span><span class="nx">x</span> <span class="p">;</span> <span class="c1">// 2</span>
<span class="nx">b</span><span class="p">.</span><span class="nx">y</span> <span class="p">;</span> <span class="c1">// 1</span></code></pre></figure>

<p><strong>Using Object.create() Method</strong><br>
You can copy the object using create, it can copy prototype as well as in the end prototype property is an object.</p>
<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">B</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">A</span><span class="p">.</span><span class="nx">prototype</span><span class="p">);</span> <span class="c1">// It's faster as it works on prototype.</span></code></pre></figure>

<footer>
  <p>Made with <a href="http://jekyllrb.com/" target="_blank">Jekyll</a></p>
</footer>
</body>
</html>