<!doctype html>
<html amp lang="en">
  <head>
    <meta charset="utf-8">
    <title>Issue With Cached Static Content - Cache Buster</title>
    <link rel="canonical" href="/issue-with-cached-static-content/" />
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    <style amp-custom>
        .header-post {
        background-color: rgb(0, 95, 151);
        min-height: 23.25rem;
        width: 100%;
        }
        .header-post .content {
        width: 95%;
        text-align: center;
        padding-top: 8.75rem;
        padding-right: 0px;
        padding-bottom: 4.125rem;
        padding-left: 0px;
        margin-top: auto;
        margin-right: auto;
        margin-bottom: auto;
        margin-left: auto;
        max-width: 50rem;
        }
        .header-post .date {
        font-family: "Open Sans", sans-serif;
        font-weight: 300;
        font-style: normal;
        font-size: 1rem;
        }
        .header-post h1, .header-post .subtitle, .header-post .date {
        color: rgb(255, 255, 255);
        text-align: center;
        }
        h1 {
        font-size: 2em;
        margin-top: 0.67em;
        margin-right: 0px;
        margin-bottom: 0.67em;
        margin-left: 0px;
        }
        h1, h2, h3, h4 {
        font-family: "Open Sans", sans-serif;
        font-weight: 800;
        font-style: normal;
        }
        .header-post h1 {
        font-size: 1.875rem;
        margin-top: 0px;
        margin-right: 0px;
        margin-bottom: 30px;
        margin-left: 0px;
        text-shadow: rgb(0, 76, 121) 3px 3px;
        }
        .header-post .subtitle {
        font-family: "Open Sans", sans-serif;
        font-weight: 300;
        font-style: normal;
        font-size: 1.25rem;
        }
        .header-post a, .header-post p {
        color: rgb(255, 255, 255);
        text-decoration-line: none;
        text-decoration-style: initial;
        text-decoration-color: initial;
        font-family: "Open Sans", sans-serif;
        font-weight: 300;
        font-style: normal;
        font-size: 1.125rem;
        }

        article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary {
        display: block;
        }
        figure {
        margin-top: 1em;
        margin-right: 40px;
        margin-bottom: 1em;
        margin-left: 40px;
        }
        .highlight {
        margin-top: 1.25rem;
        margin-right: 0px;
        margin-bottom: 1.25rem;
        margin-left: 0px;
        }
        pre {
        overflow-x: auto;
        overflow-y: auto;
        background-image: initial;
        background-position-x: initial;
        background-position-y: initial;
        background-size: initial;
        background-repeat-x: initial;
        background-repeat-y: initial;
        background-attachment: initial;
        background-origin: initial;
        background-clip: initial;
        background-color: rgb(34, 34, 34);
        width: 100%;
        padding-top: 1.25rem;
        padding-right: 0px;
        padding-bottom: 1.25rem;
        padding-left: 0px;
        color: rgb(255, 255, 255);
        margin-top: 1.875rem;
        margin-right: 0px;
        margin-bottom: 1.875rem;
        margin-left: 0px;
        font-size: 0.875rem;
        }
        code, kbd, pre, samp {
        font-family: monospace, monospace;
        font-size: 1em;
        }
        pre code {
        width: auto;
        max-width: 50rem;
        float: none;
        display: block;
        margin-right: auto;
        margin-left: auto;
        padding-top: 0px;
        padding-right: 1.25rem;
        padding-bottom: 0px;
        padding-left: 1.25rem;
        }
        pre code::after {
        clear: both;
        }
        pre span {
        line-height: 1.5rem;
        font-family: Monaco, Consolas, Menlo, monospace;
        }
        .highlight .c, .highlight .cm, .highlight .cp, .highlight .c1, .highlight .cs {
        color: rgb(117, 113, 94);
        }
        .highlight .m, .highlight .n, .highlight .nb, .highlight .ni, .highlight .nl, .highlight .nn, .highlight .py, .highlight .nv, .highlight .w, .highlight .bp, .highlight .vc, .highlight .vg, .highlight .vi {
        color: rgb(164, 208, 67);
        }
        .highlight .o, .highlight .p {
        color: rgb(247, 247, 242);
        }
        .highlight .ld, .highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .si, .highlight .sx, .highlight .sr, .highlight .s1, .highlight .ss {
        color: rgb(230, 219, 116);
        }
    </style>
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <script async custom-element="amp-ad" src="https://cdn.ampproject.org/v0/amp-ad-0.1.js"></script>
  </head>
  <body>
<header class="header-post" role="banner">
        <div class="content" style="transform: translateY(0px); opacity: 1;">
            
                <time itemprop="datePublished" datetime="2018-02-10T17:08:05-05:00" class="date">10 Feb 2018 - sanjaypatel2525</time>
            
            <h1 class="post-title" itemprop="name">Issue With Cached Static Content - Cache Buster</h1>
            <p itemprop="description" class="subtitle"></p>
        </div>
</header>
<amp-ad width="100vw" height="320"
     type="adsense"
     data-ad-client="ca-pub-6254849299387322"
     data-ad-slot="2070150131"
     data-auto-format="rspv"
     data-full-width="">
  <div overflow=""></div>
</amp-ad>
<p>Many us might have faced issue with cached static content - cache buster, Every deployment whenever there is change in static files it becomes a painful job to ask your end customer to clear the cache. In order to get rid of this problem, here are few ideas for cache buster.</p>

<p>Append version number in front of changed files references ( /path/file.js?v=1.1)
Reduce cache expiry header
Use grunt scripts to handle cache issue.</p>

<h2 id="issue-with-cached-static-content---cache-buster">Issue with cached static content - cache buster</h2>
<p>.
Let’s dive into details.</p>
<h3 id="1-appending-version-number-approach">1. Appending version number approach</h3>
<p>This is the easiest approach to resolve the static content cache issue, But required extra efforts each time you change file. Let’s say I have project, something shown as below.
<amp-img class="size-medium wp-image-6 aligncenter" src="/assets/exmple2-278x300.jpg" alt="" width="278" height="300" layout="responsive"><noscript><img class="size-medium wp-image-6 aligncenter" src="/assets/exmple2-278x300.jpg" alt="" width="278" height="300"></noscript></amp-img>
In case you have some changes in 1.js, then the references for 1.js has to be update in each files where it is used with ‘/1.js?v=&lt;new version&gt;’, in this both the JSPs.
Pros:</p>
<ul>
  <li>Very easy to implement.</li>
  <li>Doesn’t requires much planning.</li>
</ul>

<p>Cons:</p>
<ul>
  <li>Requires updating many file depending on how many places static files is reference.</li>
  <li>Chances of manual errors.</li>
</ul>

<h3 id="2-reduce-cache-expiry">2. Reduce cache expiry</h3>
<p>Cache expiry headers tells browser when to fetch new version of the file.
<amp-img class="alignnone size-full wp-image-8 " src="/assets/img_5a7f228a2f838-768x182.png" alt="" width="768" height="182" layout="responsive"><noscript><img class="alignnone size-full wp-image-8 " src="/assets/img_5a7f228a2f838-768x182.png" alt="" width="768" height="182"></noscript></amp-img>
Setting this value to 24hrs will fetch new files everyday but since browser will call this file everyday it will increase your page load time also will put some extra load on your servers. This parameter can be configured on both web and app servers.
Pros:</p>
<ul>
  <li>Easy to configure.</li>
</ul>

<p>Cons:</p>
<ul>
  <li>Increase the page load time.</li>
  <li>Increase the server load.</li>
</ul>

<h3 id="3-use-grunt-task-runner-while-deployment">3. Use grunt (task runner) while deployment.</h3>
<p>It is bit complex and depending how complex is your project structure it can take time to implement. It requires deployment script changes as well.
Pros:</p>

<p>Unlike first one it doesn’t require any changes to other files on each deployment
Can be used to minify and compress files as well</p>

<p>Cons:</p>
<ul>
  <li>One time setup requires some time and depending on how complex is you project structuring it might require lot of changes.</li>
</ul>

<p>Grunt is a task runner. The idea is to segregate all the CSS and JS files and put them up in single location. On each deployment, the script will minfy and compresses the file present at that location. Then the file is renamed to filename + file checksum, it makes sure if the file changed then the name is changed as well. The last step of script is to update the filename in all the places where it is referenced. For more information please check my other blog <a href="https://blogbeats.me/blog/india/minifying-with-grunt-jenkins/579c82c8e4b05e7c55a2036c" rel="nofollow">link</a>.</p>

<p>Please visit my sites tool section as well.<a href="https://abyte.stream/file-difference/http://techys.tk/file-difference/"> Find file differences</a></p>

<footer>
  <p>Made with <a href="http://jekyllrb.com/" target="_blank">Jekyll</a></p>
</footer>
</body>
</html>