<!doctype html>
<html amp lang="en">
  <head>
    <meta charset="utf-8">
    <title>Websphere Commerce build with Git</title>
    <link rel="canonical" href="https://abyte.stream/websphere-commerce-build-with-git/" />
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    <style amp-custom>
        .header-post {
        background-color: rgb(0, 95, 151);
        min-height: 23.25rem;
        width: 100%;
        }
        .header-post .content {
        width: 95%;
        text-align: center;
        padding-top: 8.75rem;
        padding-right: 0px;
        padding-bottom: 4.125rem;
        padding-left: 0px;
        margin-top: auto;
        margin-right: auto;
        margin-bottom: auto;
        margin-left: auto;
        max-width: 50rem;
        }
        .header-post .date {
        font-family: "Open Sans", sans-serif;
        font-weight: 300;
        font-style: normal;
        font-size: 1rem;
        }
        .header-post h1, .header-post .subtitle, .header-post .date {
        color: rgb(255, 255, 255);
        text-align: center;
        }
        h1 {
        font-size: 2em;
        margin-top: 0.67em;
        margin-right: 0px;
        margin-bottom: 0.67em;
        margin-left: 0px;
        }
        h1, h2, h3, h4 {
        font-family: "Open Sans", sans-serif;
        font-weight: 800;
        font-style: normal;
        }
        .header-post h1 {
        font-size: 1.875rem;
        margin-top: 0px;
        margin-right: 0px;
        margin-bottom: 30px;
        margin-left: 0px;
        text-shadow: rgb(0, 76, 121) 3px 3px;
        }
        .header-post .subtitle {
        font-family: "Open Sans", sans-serif;
        font-weight: 300;
        font-style: normal;
        font-size: 1.25rem;
        }
        .header-post a, .header-post p {
        color: rgb(255, 255, 255);
        text-decoration-line: none;
        text-decoration-style: initial;
        text-decoration-color: initial;
        font-family: "Open Sans", sans-serif;
        font-weight: 300;
        font-style: normal;
        font-size: 1.125rem;
        }

        article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary {
        display: block;
        }
        figure {
        margin-top: 1em;
        margin-right: 40px;
        margin-bottom: 1em;
        margin-left: 40px;
        }
        .highlight {
        margin-top: 1.25rem;
        margin-right: 0px;
        margin-bottom: 1.25rem;
        margin-left: 0px;
        }
        pre {
        overflow-x: auto;
        overflow-y: auto;
        background-image: initial;
        background-position-x: initial;
        background-position-y: initial;
        background-size: initial;
        background-repeat-x: initial;
        background-repeat-y: initial;
        background-attachment: initial;
        background-origin: initial;
        background-clip: initial;
        background-color: rgb(34, 34, 34);
        width: 100%;
        padding-top: 1.25rem;
        padding-right: 0px;
        padding-bottom: 1.25rem;
        padding-left: 0px;
        color: rgb(255, 255, 255);
        margin-top: 1.875rem;
        margin-right: 0px;
        margin-bottom: 1.875rem;
        margin-left: 0px;
        font-size: 0.875rem;
        }
        code, kbd, pre, samp {
        font-family: monospace, monospace;
        font-size: 1em;
        }
        pre code {
        width: auto;
        max-width: 50rem;
        float: none;
        display: block;
        margin-right: auto;
        margin-left: auto;
        padding-top: 0px;
        padding-right: 1.25rem;
        padding-bottom: 0px;
        padding-left: 1.25rem;
        }
        pre code::after {
        clear: both;
        }
        pre span {
        line-height: 1.5rem;
        font-family: Monaco, Consolas, Menlo, monospace;
        }
        .highlight .c, .highlight .cm, .highlight .cp, .highlight .c1, .highlight .cs {
        color: rgb(117, 113, 94);
        }
        .highlight .m, .highlight .n, .highlight .nb, .highlight .ni, .highlight .nl, .highlight .nn, .highlight .py, .highlight .nv, .highlight .w, .highlight .bp, .highlight .vc, .highlight .vg, .highlight .vi {
        color: rgb(164, 208, 67);
        }
        .highlight .o, .highlight .p {
        color: rgb(247, 247, 242);
        }
        .highlight .ld, .highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .si, .highlight .sx, .highlight .sr, .highlight .s1, .highlight .ss {
        color: rgb(230, 219, 116);
        }
    </style>
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <script async src="https://cdn.ampproject.org/v0.js"></script>
  </head>
  <body>
<header class="header-post" role="banner">
        <div class="content" style="transform: translateY(0px); opacity: 1;">
            
                <time itemprop="datePublished" datetime="2017-12-11T21:16:05-05:00" class="date">11 Dec 2017 - sanjaypatel2525</time>
            
            <h1 class="post-title" itemprop="name">Websphere Commerce build with Git</h1>
            <p itemprop="description" class="subtitle"></p>
        </div>
</header>
<p>Websphere Commerce (WCS) is e-Commerce software platform. It supports multiple business models to support a wide range of customer requirements.
WCS did not have Git support till version 8.  It has introduced Git support from version 9 onwards. Git is a free open source distributed source control management software.
This blog we are going to discuss Git configuration with WCS build.</p>
<h3 id="prerequisite">Prerequisite:</h3>
<ul>
  <li>Git needs to be installed on the build system</li>
</ul>

<h3 id="copy2-the-template-file-from-wcbd-template-to-wcbdfolder-and-update-the-names-as-given-below">Copy2 the template file from wcbd template to wcbd  folder and update the names as given below.</h3>

<p><amp-img src="https://abyte.stream/assets/img_5c1021100f5c3.png" alt="gras" width="575" height="124" layout="responsive"><noscript><img src="https://abyte.stream/assets/img_5c1021100f5c3.png" alt="gras" width="575" height="124"></noscript></amp-img></p>
<ul>
  <li>extract-git.private.properties<br>
</li>
  <li>extract-git.properties<br>
</li>
  <li>extract-git.xml</li>
</ul>

<h3 id="configure-buildpropertyto-pick-new-extract-gitxml">Configure build.property to pick new extract-git.xml</h3>

<p>extract.ant.file=${basedir}/extract-git.xml</p>
<h3 id="configure-git-url-and-default-branch-or-tag-name-in-extract-gitproperties">Configure git URL and default branch or tag name in extract-git.properties.</h3>
<figure class="highlight"><pre><code class="language-properties" data-lang="properties"><span class="c">#-------------------------------------------------------------------------------
# git.url
#
# The git url variable. On Windows, use the escaped backslash (\) as the path
# separator if repository is local.
#-------------------------------------------------------------------------------
</span><span class="py">git.url</span><span class="p">=</span><span class="s">yourgitip:yourgit:port/yourprojectname.git</span>

<span class="c">#-------------------------------------------------------------------------------
# git.branchOrTag
#
# The branch or tag of the package/module to check out.
#-------------------------------------------------------------------------------
</span><span class="py">git.branchOrTag</span><span class="p">=</span><span class="s">development</span></code></pre></figure>

<h3 id="configure-git-username-and-password-inextract-gitprivateproperties"> Configure git username and password in extract-git.private.properties</h3>
<h3 id="run-the-build-and-test-it-using-the-following-command">Run the build and test it using the following command.</h3>
<figure class="highlight"><pre><code class="language-properties" data-lang="properties"><span class="py">git.password</span><span class="p">=</span><span class="s">&lt;someusername&gt;</span>
<span class="py">git.username</span><span class="p">=</span><span class="s">&lt;somepassword&gt;</span></code></pre></figure>
<h3 id="update-theextract-gitxml-with-below-ant-code">Update the extract-git.xml with below ant code.</h3>
<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;project</span> <span class="na">name=</span><span class="s">"extract-git"</span> <span class="na">default=</span><span class="s">"all"</span><span class="nt">&gt;</span>

  <span class="nt">&lt;available</span> <span class="na">property=</span><span class="s">"found.${ant.project.name}.properties"</span>
             <span class="na">file=</span><span class="s">"${basedir}/${ant.project.name}.properties"</span>
             <span class="na">type=</span><span class="s">"file"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;fail</span> <span class="na">message=</span><span class="s">"${basedir}/${ant.project.name}.properties does not exist."</span>
        <span class="na">unless=</span><span class="s">"found.${ant.project.name}.properties"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">file=</span><span class="s">"${basedir}/${ant.project.name}.properties"</span> <span class="nt">/&gt;</span>

  <span class="nt">&lt;encodeProperties</span> <span class="na">file=</span><span class="s">"${ant.project.name}.private.properties"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;decodeLoadProperties</span> <span class="na">file=</span><span class="s">"${ant.project.name}.private.properties"</span> <span class="nt">/&gt;</span>

  <span class="c">&lt;!--
   Runs the source extraction process.
  --&gt;</span>
  <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">"all"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;condition</span> <span class="na">property=</span><span class="s">"branchOrTag"</span> <span class="na">value=</span><span class="s">"${build.branchOrTag}"</span> <span class="na">else=</span><span class="s">"${git.branchOrTag}"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;isset</span> <span class="na">property=</span><span class="s">"build.branchOrTag"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/condition&gt;</span>
    <span class="nt">&lt;if&gt;</span>
      <span class="nt">&lt;istrue</span> <span class="na">value=</span><span class="s">"${extract.update.mode}"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;then&gt;</span>
        <span class="nt">&lt;if&gt;</span>
          <span class="nt">&lt;available</span> <span class="na">file=</span><span class="s">"${module.dir}"</span> <span class="na">type=</span><span class="s">"dir"</span> <span class="nt">/&gt;</span>
          <span class="nt">&lt;then&gt;</span>
            <span class="nt">&lt;echo</span> <span class="na">message =</span> <span class="s">"GIT Command: git pull --tags"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;exec</span> <span class="na">executable =</span> <span class="s">"git"</span> <span class="na">dir =</span> <span class="s">"${module.dir}"</span> <span class="na">failonerror=</span><span class="s">"true"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;arg</span> <span class="na">value =</span> <span class="s">"pull"</span> <span class="nt">/&gt;</span>
              <span class="nt">&lt;arg</span> <span class="na">value =</span> <span class="s">"--tags"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/exec&gt;</span>
            <span class="nt">&lt;echo</span> <span class="na">message =</span> <span class="s">"GIT Command: git reset --hard origin/${branchOrTag}"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;exec</span> <span class="na">executable =</span> <span class="s">"git"</span> <span class="na">dir =</span> <span class="s">"${module.dir}"</span> <span class="na">failonerror=</span><span class="s">"true"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;arg</span> <span class="na">value =</span> <span class="s">"reset"</span> <span class="nt">/&gt;</span>
              <span class="nt">&lt;arg</span> <span class="na">value =</span> <span class="s">"--hard"</span> <span class="nt">/&gt;</span>
              <span class="nt">&lt;arg</span> <span class="na">value =</span> <span class="s">"origin/${branchOrTag}"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/exec&gt;</span>
          <span class="nt">&lt;/then&gt;</span>
          <span class="nt">&lt;else&gt;</span>
            <span class="nt">&lt;echo</span> <span class="na">message =</span> <span class="s">"GIT Command: git clone -b ${branchOrTag} http://${git.username}:${git.password}@${git.url}"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;exec</span> <span class="na">executable =</span> <span class="s">"git"</span> <span class="na">dir =</span> <span class="s">"${source.dir}"</span> <span class="na">failonerror=</span><span class="s">"true"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;arg</span> <span class="na">value =</span> <span class="s">"clone"</span> <span class="nt">/&gt;</span>
              <span class="nt">&lt;arg</span> <span class="na">value =</span> <span class="s">"-b"</span> <span class="nt">/&gt;</span>
              <span class="nt">&lt;arg</span> <span class="na">value =</span> <span class="s">"${branchOrTag}"</span> <span class="nt">/&gt;</span>
              <span class="nt">&lt;arg</span> <span class="na">value =</span> <span class="s">"http://${git.username}:${git.password}@${git.url}"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/exec&gt;</span>
          <span class="nt">&lt;/else&gt;</span>
        <span class="nt">&lt;/if&gt;</span>
      <span class="nt">&lt;/then&gt;</span>
      <span class="nt">&lt;else&gt;</span>
        <span class="nt">&lt;echo</span> <span class="na">message =</span> <span class="s">"GIT Command: git clone -b ${branchOrTag} http://${git.username}:${git.password}@${git.url}"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;exec</span> <span class="na">executable =</span> <span class="s">"git"</span> <span class="na">dir =</span> <span class="s">"${source.dir}"</span> <span class="na">failonerror=</span><span class="s">"true"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;arg</span> <span class="na">value =</span> <span class="s">"clone"</span> <span class="nt">/&gt;</span>
          <span class="nt">&lt;arg</span> <span class="na">value =</span> <span class="s">"-b"</span> <span class="nt">/&gt;</span>
          <span class="nt">&lt;arg</span> <span class="na">value =</span> <span class="s">"${branchOrTag}"</span> <span class="nt">/&gt;</span>
          <span class="nt">&lt;arg</span> <span class="na">value =</span> <span class="s">"http://${git.username}:${git.password}@${git.url}"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/exec&gt;</span>
      <span class="nt">&lt;/else&gt;</span>
    <span class="nt">&lt;/if&gt;</span>
    <span class="nt">&lt;defaultexcludes</span> <span class="na">add=</span><span class="s">"CVSROOT/**"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/target&gt;</span>

<span class="nt">&lt;/project&gt;</span></code></pre></figure>
<h3 id="run-the-build-and-test-it-using-the-following-command-1">Run the build and test it using the following command.</h3>
<p>./wcbd-ant -buildfile wcbd-build.xml
This is all about configuring Git with WCBD ant script. This script covers build in both the modes full and update. Also, this build supports code checkout form tag and branch both.
 </p>

<footer>
  <p>Made with <a href="http://jekyllrb.com/" target="_blank">Jekyll</a></p>
</footer>
</body>
</html>