<!doctype html>
<html amp lang="en">
  <head>
    <meta charset="utf-8">
    <title>E2E Browser Testing with Protractor</title>
    <link rel="canonical" href="https://sanjaypatel2525.github.io/end-to-end-e2e-browser-testing-with-protractor-angular-and-non-angular/" />
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    <style amp-custom>
        .header-post {
        background-color: rgb(0, 95, 151);
        min-height: 23.25rem;
        width: 100%;
        }
        .header-post .content {
        width: 95%;
        text-align: center;
        padding-top: 8.75rem;
        padding-right: 0px;
        padding-bottom: 4.125rem;
        padding-left: 0px;
        margin-top: auto;
        margin-right: auto;
        margin-bottom: auto;
        margin-left: auto;
        max-width: 50rem;
        }
        .header-post .date {
        font-family: "Open Sans", sans-serif;
        font-weight: 300;
        font-style: normal;
        font-size: 1rem;
        }
        .header-post h1, .header-post .subtitle, .header-post .date {
        color: rgb(255, 255, 255);
        text-align: center;
        }
        h1 {
        font-size: 2em;
        margin-top: 0.67em;
        margin-right: 0px;
        margin-bottom: 0.67em;
        margin-left: 0px;
        }
        h1, h2, h3, h4 {
        font-family: "Open Sans", sans-serif;
        font-weight: 800;
        font-style: normal;
        }
        .header-post h1 {
        font-size: 1.875rem;
        margin-top: 0px;
        margin-right: 0px;
        margin-bottom: 30px;
        margin-left: 0px;
        text-shadow: rgb(0, 76, 121) 3px 3px;
        }
        .header-post .subtitle {
        font-family: "Open Sans", sans-serif;
        font-weight: 300;
        font-style: normal;
        font-size: 1.25rem;
        }
        .header-post a, .header-post p {
        color: rgb(255, 255, 255);
        text-decoration-line: none;
        text-decoration-style: initial;
        text-decoration-color: initial;
        font-family: "Open Sans", sans-serif;
        font-weight: 300;
        font-style: normal;
        font-size: 1.125rem;
        }

        article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary {
        display: block;
        }
        figure {
        margin-top: 1em;
        margin-right: 40px;
        margin-bottom: 1em;
        margin-left: 40px;
        }
        .highlight {
        margin-top: 1.25rem;
        margin-right: 0px;
        margin-bottom: 1.25rem;
        margin-left: 0px;
        }
        pre {
        overflow-x: auto;
        overflow-y: auto;
        background-image: initial;
        background-position-x: initial;
        background-position-y: initial;
        background-size: initial;
        background-repeat-x: initial;
        background-repeat-y: initial;
        background-attachment: initial;
        background-origin: initial;
        background-clip: initial;
        background-color: rgb(34, 34, 34);
        width: 100%;
        padding-top: 1.25rem;
        padding-right: 0px;
        padding-bottom: 1.25rem;
        padding-left: 0px;
        color: rgb(255, 255, 255);
        margin-top: 1.875rem;
        margin-right: 0px;
        margin-bottom: 1.875rem;
        margin-left: 0px;
        font-size: 0.875rem;
        }
        code, kbd, pre, samp {
        font-family: monospace, monospace;
        font-size: 1em;
        }
        pre code {
        width: auto;
        max-width: 50rem;
        float: none;
        display: block;
        margin-right: auto;
        margin-left: auto;
        padding-top: 0px;
        padding-right: 1.25rem;
        padding-bottom: 0px;
        padding-left: 1.25rem;
        }
        pre code::after {
        clear: both;
        }
        pre span {
        line-height: 1.5rem;
        font-family: Monaco, Consolas, Menlo, monospace;
        }
        .highlight .c, .highlight .cm, .highlight .cp, .highlight .c1, .highlight .cs {
        color: rgb(117, 113, 94);
        }
        .highlight .m, .highlight .n, .highlight .nb, .highlight .ni, .highlight .nl, .highlight .nn, .highlight .py, .highlight .nv, .highlight .w, .highlight .bp, .highlight .vc, .highlight .vg, .highlight .vi {
        color: rgb(164, 208, 67);
        }
        .highlight .o, .highlight .p {
        color: rgb(247, 247, 242);
        }
        .highlight .ld, .highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .si, .highlight .sx, .highlight .sr, .highlight .s1, .highlight .ss {
        color: rgb(230, 219, 116);
        }
    </style>
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <script async src="https://cdn.ampproject.org/v0.js"></script>
  </head>
  <body>
<header class="header-post" role="banner">
        <div class="content" style="transform: translateY(0px); opacity: 1;">
            
                <time itemprop="datePublished" datetime="2018-03-02 03:36:41 -0500" class="date">2018-03-02 03:36:41 -0500 - sanjaypatel2525</time>
            
            <h1 class="post-title" itemprop="name">E2E Browser Testing with Protractor</h1>
            <p itemprop="description" class="subtitle"></p>
        </div>
</header>
<p>There are many ways to test our application but having a testing with end user feel is the always the important one. The protractor is JS framework built up Selenium JS web driver.  It provides ease of End to End (E2E) browser testing with protractor angular and non angular applications. It provides a JS wrapper around Selenium commands. The framework contains many intuitive functions which really speed up writing test cases.</p>

<p>** Protractor doesn’t require your site to be on the Angular framework, You can use it all kind of sites.</p>
<h2 id="in-this-blog-we-are-going-to-cover-following-points">In this blog, we are going to cover following points.</h2>

<p>What is Protractor and why you need it?
Setting up and running Protractor project.
Running protractor headless in non-UI Linux kind of environment.
Perks- Taking the screenshot.</p>

<p><amp-img class="alignnone size-full wp-image-252" src="/assets/img_5a9774aa865b3.png" alt="" width="799" height="184" layout="responsive"><noscript><img class="alignnone size-full wp-image-252" src="/assets/img_5a9774aa865b3.png" alt="" width="799" height="184"></noscript></amp-img></p>
<h2 id="what-is-protractor-and-why-you-need-it">What is Protractor and why you need it?</h2>
<p>The protractor is an end to end browser test automation tool.  It emulates user like actions on browsers and is supported by many browsers (chrome, IE, firefox etc). It is a wrapper around selenium web driver commands and much more. Provides automatic wait capabilities for the resource to load and render. Here some points which make Protractor a great framework.</p>

<ul>
  <li>It is an open source project and has big community support.</li>
  <li>It is well documented.</li>
  <li>Easy to setup and configure.</li>
  <li>Work with almost all the browser.</li>
  <li>Anytime you can take screenshots of the browser.</li>
</ul>

<h2 id="setting-up-and-running-protractor-project">Setting up and running Protractor project.</h2>
<p>Let’s jump into technicals. We are going to install and run one sample Protractor test case.</p>

<h3 id="download-and-install-node-js-and-npm-from-the-following-url">Download and install Node JS and npm from the following URL.</h3>
<p><a href="https://nodejs.org/en/download/" rel="nofollow">https://nodejs.org/en/download/</a></p>

<h3 id="install-protractor-using-npm-open-shallcommand-prompt">Install Protractor using npm, Open shall/command prompt.</h3>
<p>npm install -g protractor</p>

<h3 id="with-above-command-you-must-have-web-driver-manger-command-available-to-your-console-update-web-driver-managerwebdriver-manager">With above command, you must have web driver-manger command available to your console, Update web driver-managerwebdriver-manager</h3>
<p>update</p>

<h3 id="start-web-driver-manager-in-the-separate-console">Start web driver-manager in the separate console.</h3>
<p>webdriver-manager start
This required when you run you test case.
Create a file conf.js for Protractor configurations.</p>
<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">exports</span><span class="o">.</span><span class="na">config</span> <span class="o">=</span> <span class="o">{</span>
	<span class="nl">seleniumAddress:</span> <span class="err">'</span><span class="nl">http:</span><span class="c1">//localhost:4444/wd/hub',</span>
	<span class="nl">specs:</span> <span class="o">[</span><span class="err">'</span><span class="n">First</span><span class="o">-</span><span class="n">test</span><span class="o">.</span><span class="na">js</span><span class="err">'</span><span class="o">],</span>
	<span class="nl">allScriptsTimeout:</span> <span class="mi">30000</span><span class="o">,</span>

	<span class="c1">// Options to be passed to Jasmine-node.</span>
	<span class="nl">jasmineNodeOpts:</span> <span class="o">{</span>
		<span class="nl">showColors:</span> <span class="kc">true</span><span class="o">,</span>
		<span class="nl">defaultTimeoutInterval:</span> <span class="mi">100000</span><span class="o">,</span>
		<span class="nl">isVerbose:</span> <span class="kc">true</span>
	<span class="o">},</span>
	<span class="nl">capabilities:</span> <span class="o">{</span>
		<span class="err">'</span><span class="n">browserName</span><span class="err">'</span><span class="o">:</span> <span class="err">'</span><span class="n">chrome</span><span class="err">'</span><span class="o">,</span>
		<span class="err">'</span><span class="n">chromeOptions</span><span class="err">'</span><span class="o">:</span> <span class="o">{</span>
			<span class="nl">args:</span> <span class="o">[</span> <span class="s">"--headless"</span><span class="o">,</span> <span class="s">"--disable-gpu"</span><span class="o">,</span> <span class="s">"--window-size=1920x1080"</span> <span class="o">]</span> 
		<span class="o">}</span>
	<span class="o">}</span><span class="c1">// remove headless if you want to see the action</span>
<span class="o">};</span></code></pre></figure>

<h3 id="create-first-testjs-in-the-same-location">Create First-test.js in the same location.</h3>
<p>This is your actual test steps. For now, you can copy paste below code. This script will open google.com and search for ‘abyte.stream’</p>
<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">describe</span><span class="o">(</span><span class="err">'</span><span class="n">First</span> <span class="n">automated</span> <span class="n">tests</span><span class="err">'</span><span class="o">,</span> <span class="n">function</span><span class="o">()</span> <span class="o">{</span>

  <span class="n">beforeEach</span><span class="o">(</span><span class="n">function</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">return</span> <span class="n">browser</span><span class="o">.</span><span class="na">ignoreSynchronization</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> <span class="c1">// Important for non angular applications</span>
    <span class="o">});</span>

  <span class="n">it</span><span class="o">(</span><span class="err">'</span><span class="n">First</span> <span class="n">test</span><span class="err">'</span><span class="o">,</span> <span class="n">function</span><span class="o">()</span> <span class="o">{</span>
	<span class="c1">//debugger;	 enable if you want to debug the code in chrome</span>
	<span class="n">browser</span><span class="o">.</span><span class="na">driver</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="err">'</span><span class="nl">https:</span><span class="c1">//www.google.com');</span>
	<span class="n">browser</span><span class="o">.</span><span class="na">driver</span><span class="o">.</span><span class="na">manage</span><span class="o">().</span><span class="na">window</span><span class="o">().</span><span class="na">maximize</span><span class="o">();</span>
	<span class="n">browser</span><span class="o">.</span><span class="na">driver</span><span class="o">.</span><span class="na">findElement</span><span class="o">(</span><span class="n">by</span><span class="o">.</span><span class="na">id</span><span class="o">(</span><span class="err">'</span><span class="n">lst</span><span class="o">-</span><span class="n">ib</span><span class="err">'</span><span class="o">)).</span><span class="na">sendKeys</span><span class="o">(</span><span class="err">'</span><span class="n">abyte</span><span class="o">.</span><span class="na">stream</span><span class="err">'</span><span class="o">);</span>
	<span class="n">browser</span><span class="o">.</span><span class="na">driver</span><span class="o">.</span><span class="na">findElement</span><span class="o">(</span><span class="n">by</span><span class="o">.</span><span class="na">name</span><span class="o">(</span><span class="err">'</span><span class="n">btnK</span><span class="err">'</span><span class="o">)).</span><span class="na">click</span><span class="o">();</span>
        <span class="c1">//expect(completedAmount.count()).toEqual(2);*/ Test any condition here which expect in the output.</span>
  <span class="o">});</span>
<span class="o">});</span></code></pre></figure>

<h3 id="run-the-protractor-using-the-following-command-and-see-the-protractor-driving-browser-magic">Run the protractor using the following command and see the protractor driving browser magic.</h3>
<p>protractor conf.js</p>

<h2 id="running-protractor-headless-in-non-ui-linux-kind-of-environment">Running protractor headless in non UI Linux kind of environment.</h2>
<p><amp-img class="alignnone size-full wp-image-260" src="/assets/img_5a98c56230888.png" alt="" width="789" height="221" layout="responsive"><noscript><img class="alignnone size-full wp-image-260" src="/assets/img_5a98c56230888.png" alt="" width="789" height="221"></noscript></amp-img>
Till this point, we have successfully achieved running test on the real browser. There are places when we do not have GUI, we just have a black screen server, In this situation, we need to go headless.</p>

<p>Headless browser doesn’t require a graphics driver at all, They just get commands and execute them directly in memory. To achieve this you need to specify headless in cong.js under capabilities.</p>
<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="w"> </span><span class="err">capabilities</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">'browserName'</span><span class="p">:</span><span class="w"> </span><span class="err">'chrome'</span><span class="p">,</span><span class="w"> </span><span class="err">'chromeOptions'</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">args</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"--headless"</span><span class="p">,</span><span class="w"> </span><span class="s2">"--disable-gpu"</span><span class="p">,</span><span class="w"> </span><span class="s2">"--window-size=1920x1080"</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span></code></pre></figure>
<h2 id="taking-screenshot">Taking screenshot</h2>
<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;code</span> <span class="na">class=</span><span class="s">"lang-javascript"</span><span class="nt">&gt;</span>
browser.takeScreenshot().then(function(png) {
  var stream = fs.createWriteStream("/tmp/screenshot.png");
  stream.write(new Buffer(png, 'base64'));
  stream.end();
});</code></pre></figure>


<footer>
    <p>Made with <a href="http://jekyllrb.com/" target="_blank">Jekyll</a></p>
</footer>
<script src="/assets/js/main.js"></script>
</body>
</html>